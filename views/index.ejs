<!DOCTYPE html>
<html>
  <head>
    <title>Members Only</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>Members Only</h1>
    <p>A secret forumn for members only.</p>
    <h2>Links:</h2>
    <ul>
      <li><a href="/allusers">All Users</a></li>
      <li><a href="/user/create">Sign Up</a></li>
      <% if (user && user.membership === false) {%>
        <li><a href="/memberform">Join the Club...</a></li>
      <%}%>
    </ul>
    <p></p>
    <% if (user) {%>
      <h1>WELCOME BACK <%= user.username %></h1>
      <a href="/log-out">LOG OUT</a>
      <h2>Post a message</h2>
      <form action="/post-message" method="POST">
        <label for="msg"></label>
        <input name="msg" placeholder="enter your text here" type="text" />
        <button>Post</button>
      </form>
    <% } else { %>
      <h2>please log in</h2>
      <form action="/log-in" method="POST">
        <label for="username">Username</label>
        <input name="username" placeholder="username" type="text" />
        <label for="password">Password</label>
        <input name="password" type="password" />
        <button>Log In</button>
      </form>
    <%}%>
    <p></p>
    
    <div id="forum-container">
      <h2>Forum</h2>

      <% if (user && user.membership === true) { %>
        <% for (const msg of messages) { %>
          <div id="msg-container">
            <h4><%= msg.username %></h4>
            <div class="date"><i><%= msg.date %></i></div>
            <span class="text">
              <%= msg.text %>
            </span>
          </div>
        <% } %>
      <% } else { %>
        <% for (const msg of messages) { %>
          <div id="msg-container">
            <h4>Username hidden</h4>
            <div class="date"><i>Date hidden</i></div>
            <span class="text">
              <%= msg.text %>
            </span>
          </div>
        <% } %>
      <% } %>
    </div>

  </body>
</html>